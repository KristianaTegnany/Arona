{"version":3,"sources":["../node_modules/external-editor/example_sync.js"],"names":["ExternalEditor","require","readline","rl","createInterface","input","process","stdin","output","message","stdout","write","editor","on","response","run","replace","trim","lastExitStatus","stderr","length","moveCursor","close","err"],"mappings":"AAAA,IAAIA,cAAc,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkBD,cAAvC;;AACA,IAAIE,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAtB;;AAEA,IAAIE,EAAE,GAAGD,QAAQ,CAACE,eAAT,CAAyB;AAChCC,EAAAA,KAAK,EAAEC,OAAO,CAACC,KADiB;AAEhCC,EAAAA,MAAM,EAAE;AAFwB,CAAzB,CAAT;AAKA,IAAIC,OAAO,GAAG,qEAAd;AAEAH,OAAO,CAACI,MAAR,CAAeC,KAAf,CAAqB,uEAArB;AAEAC,MAAM,GAAG,IAAIZ,cAAJ,CAAmBS,OAAnB,CAAT;AAEAN,EAAE,CAACU,EAAH,CAAM,MAAN,EAAc,YAAY;AACxB,MAAI;AACF;AACA,QAAIC,QAAQ,GAAGF,MAAM,CAACG,GAAP,GAAaC,OAAb,CAAqB,WAArB,EAAkC,EAAlC,EAAsCA,OAAtC,CAA8C,OAA9C,EAAuD,EAAvD,EAA2DC,IAA3D,EAAf;;AAEA,QAAIL,MAAM,CAACM,cAAP,KAA0B,CAA9B,EAAiC;AAC/BZ,MAAAA,OAAO,CAACa,MAAR,CAAeR,KAAf,CAAqB,oDAArB;AACD;;AAED,QAAIG,QAAQ,CAACM,MAAT,KAAoB,CAAxB,EAA2B;AACzBlB,MAAAA,QAAQ,CAACmB,UAAT,CAAoBf,OAAO,CAACI,MAA5B,EAAoC,CAApC,EAAuC,CAAC,CAAxC;AACAJ,MAAAA,OAAO,CAACI,MAAR,CAAeC,KAAf,CAAqB,yFAArB;AACD,KAHD,MAGO;AACLL,MAAAA,OAAO,CAACI,MAAR,CAAeC,KAAf,CAAqB,iBAArB;AACAL,MAAAA,OAAO,CAACI,MAAR,CAAeC,KAAf,CAAqBG,QAArB;AACAR,MAAAA,OAAO,CAACI,MAAR,CAAeC,KAAf,CAAqB,IAArB;AACAR,MAAAA,EAAE,CAACmB,KAAH;AACD;AACF,GAjBD,CAiBE,OAAOC,GAAP,EAAY;AACZjB,IAAAA,OAAO,CAACa,MAAR,CAAeR,KAAf,CAAqBY,GAAG,CAACd,OAAzB;AACAH,IAAAA,OAAO,CAACI,MAAR,CAAeC,KAAf,CAAqB,IAArB;AACAR,IAAAA,EAAE,CAACmB,KAAH;AACD;AACF,CAvBD","sourcesContent":["var ExternalEditor = require('./main').ExternalEditor;\nvar readline = require('readline');\n\nvar rl = readline.createInterface({\n  input: process.stdin,\n  output: null\n});\n\nvar message = '\\n\\n# Please Write a message\\n# Any line starting with # is ignored';\n\nprocess.stdout.write('Please write a message. (press enter to launch your preferred editor)');\n\neditor = new ExternalEditor(message);\n\nrl.on('line', function () {\n  try {\n    // Get response, remove all lines starting with #, remove any trailing newlines.\n    var response = editor.run().replace(/^#.*\\n?/gm, '').replace(/\\n+$/g, '').trim();\n\n    if (editor.lastExitStatus !== 0) {\n      process.stderr.write(\"WARN: The editor exited with a non-zero status\\n\\n\")\n    }\n\n    if (response.length === 0) {\n      readline.moveCursor(process.stdout, 0, -1);\n      process.stdout.write('Your message was empty, please try again. (press enter to launch your preferred editor)');\n    } else {\n      process.stdout.write('Your Message:\\n');\n      process.stdout.write(response);\n      process.stdout.write('\\n');\n      rl.close();\n    }\n  } catch (err) {\n    process.stderr.write(err.message);\n    process.stdout.write('\\n');\n    rl.close();\n  }\n});\n"],"file":"example_sync.js"}