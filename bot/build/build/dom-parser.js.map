{"version":3,"sources":["../node_modules/xmldom/dom-parser.js"],"names":["options","locator","DOMParser","sax","domBuilder","errorHandler","defaultNSMap","entityMap","buildErrorHandler","errorImpl","isCallback","fn","_locator","build","node","DOMHandler","startDocument","startElement","doc","el","qName","len","attrs","appendElement","position","i","namespaceURI","value","attr","endElement","current","tagName","startPrefixMapping","endPrefixMapping","processingInstruction","ins","ignorableWhitespace","characters","chars","_toString","charNode","skippedEntity","endDocument","setDocumentLocator","comment","comm","startCDATA","endCDATA","startDTD","impl","dt","warning","console","error","fatalError","l","start","java","hander","XMLReader","require","DOMImplementation","exports"],"mappings":"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","sourcesContent":["function DOMParser(options){\r\n\tthis.options = options ||{locator:{}};\r\n\t\r\n}\r\nDOMParser.prototype.parseFromString = function(source,mimeType){\r\n\tvar options = this.options;\r\n\tvar sax =  new XMLReader();\r\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\r\n\tvar errorHandler = options.errorHandler;\r\n\tvar locator = options.locator;\r\n\tvar defaultNSMap = options.xmlns||{};\r\n\tvar entityMap = {'lt':'<','gt':'>','amp':'&','quot':'\"','apos':\"'\"}\r\n\tif(locator){\r\n\t\tdomBuilder.setDocumentLocator(locator)\r\n\t}\r\n\t\r\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\r\n\tsax.domBuilder = options.domBuilder || domBuilder;\r\n\tif(/\\/x?html?$/.test(mimeType)){\r\n\t\tentityMap.nbsp = '\\xa0';\r\n\t\tentityMap.copy = '\\xa9';\r\n\t\tdefaultNSMap['']= 'http://www.w3.org/1999/xhtml';\r\n\t}\r\n\tdefaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\r\n\tif(source){\r\n\t\tsax.parse(source,defaultNSMap,entityMap);\r\n\t}else{\r\n\t\tsax.errorHandler.error(\"invalid doc source\");\r\n\t}\r\n\treturn domBuilder.doc;\r\n}\r\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\r\n\tif(!errorImpl){\r\n\t\tif(domBuilder instanceof DOMHandler){\r\n\t\t\treturn domBuilder;\r\n\t\t}\r\n\t\terrorImpl = domBuilder ;\r\n\t}\r\n\tvar errorHandler = {}\r\n\tvar isCallback = errorImpl instanceof Function;\r\n\tlocator = locator||{}\r\n\tfunction build(key){\r\n\t\tvar fn = errorImpl[key];\r\n\t\tif(!fn && isCallback){\r\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\r\n\t\t}\r\n\t\terrorHandler[key] = fn && function(msg){\r\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\r\n\t\t}||function(){};\r\n\t}\r\n\tbuild('warning');\r\n\tbuild('error');\r\n\tbuild('fatalError');\r\n\treturn errorHandler;\r\n}\r\n\r\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\r\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\r\nfunction DOMHandler() {\r\n    this.cdata = false;\r\n}\r\nfunction position(locator,node){\r\n\tnode.lineNumber = locator.lineNumber;\r\n\tnode.columnNumber = locator.columnNumber;\r\n}\r\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */ \r\nDOMHandler.prototype = {\r\n\tstartDocument : function() {\r\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\r\n    \tif (this.locator) {\r\n        \tthis.doc.documentURI = this.locator.systemId;\r\n    \t}\r\n\t},\r\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\r\n\t\tvar doc = this.doc;\r\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\r\n\t    var len = attrs.length;\r\n\t    appendElement(this, el);\r\n\t    this.currentElement = el;\r\n\t    \r\n\t\tthis.locator && position(this.locator,el)\r\n\t    for (var i = 0 ; i < len; i++) {\r\n\t        var namespaceURI = attrs.getURI(i);\r\n\t        var value = attrs.getValue(i);\r\n\t        var qName = attrs.getQName(i);\r\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\r\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\r\n\t\t\tattr.value = attr.nodeValue = value;\r\n\t\t\tel.setAttributeNode(attr)\r\n\t    }\r\n\t},\r\n\tendElement:function(namespaceURI, localName, qName) {\r\n\t\tvar current = this.currentElement\r\n\t\tvar tagName = current.tagName;\r\n\t\tthis.currentElement = current.parentNode;\r\n\t},\r\n\tstartPrefixMapping:function(prefix, uri) {\r\n\t},\r\n\tendPrefixMapping:function(prefix) {\r\n\t},\r\n\tprocessingInstruction:function(target, data) {\r\n\t    var ins = this.doc.createProcessingInstruction(target, data);\r\n\t    this.locator && position(this.locator,ins)\r\n\t    appendElement(this, ins);\r\n\t},\r\n\tignorableWhitespace:function(ch, start, length) {\r\n\t},\r\n\tcharacters:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t\t//console.log(chars)\r\n\t\tif(chars){\r\n\t\t\tif (this.cdata) {\r\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\r\n\t\t\t} else {\r\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\r\n\t\t\t}\r\n\t\t\tif(this.currentElement){\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t}else if(/^\\s*$/.test(chars)){\r\n\t\t\t\tthis.doc.appendChild(charNode);\r\n\t\t\t\t//process xml\r\n\t\t\t}\r\n\t\t\tthis.locator && position(this.locator,charNode)\r\n\t\t}\r\n\t},\r\n\tskippedEntity:function(name) {\r\n\t},\r\n\tendDocument:function() {\r\n\t\tthis.doc.normalize();\r\n\t},\r\n\tsetDocumentLocator:function (locator) {\r\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\r\n\t    \tlocator.lineNumber = 0;\r\n\t    }\r\n\t},\r\n\t//LexicalHandler\r\n\tcomment:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t    var comm = this.doc.createComment(chars);\r\n\t    this.locator && position(this.locator,comm)\r\n\t    appendElement(this, comm);\r\n\t},\r\n\t\r\n\tstartCDATA:function() {\r\n\t    //used in characters() methods\r\n\t    this.cdata = true;\r\n\t},\r\n\tendCDATA:function() {\r\n\t    this.cdata = false;\r\n\t},\r\n\t\r\n\tstartDTD:function(name, publicId, systemId) {\r\n\t\tvar impl = this.doc.implementation;\r\n\t    if (impl && impl.createDocumentType) {\r\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\r\n\t        this.locator && position(this.locator,dt)\r\n\t        appendElement(this, dt);\r\n\t    }\r\n\t},\r\n\t/**\r\n\t * @see org.xml.sax.ErrorHandler\r\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n\t */\r\n\twarning:function(error) {\r\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\r\n\t},\r\n\terror:function(error) {\r\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\r\n\t},\r\n\tfatalError:function(error) {\r\n\t\tconsole.error('[xmldom fatalError]\\t'+error,_locator(this.locator));\r\n\t    throw error;\r\n\t}\r\n}\r\nfunction _locator(l){\r\n\tif(l){\r\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\r\n\t}\r\n}\r\nfunction _toString(chars,start,length){\r\n\tif(typeof chars == 'string'){\r\n\t\treturn chars.substr(start,length)\r\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\r\n\t\tif(chars.length >= start+length || start){\r\n\t\t\treturn new java.lang.String(chars,start,length)+'';\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n}\r\n\r\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\r\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\r\n\tDOMHandler.prototype[key] = function(){return null}\r\n})\r\n\r\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\r\nfunction appendElement (hander,node) {\r\n    if (!hander.currentElement) {\r\n        hander.doc.appendChild(node);\r\n    } else {\r\n        hander.currentElement.appendChild(node);\r\n    }\r\n}//appendChild and setAttributeNS are preformance key\r\n\r\n//if(typeof require == 'function'){\r\n\tvar XMLReader = require('./sax').XMLReader;\r\n\tvar DOMImplementation = exports.DOMImplementation = require('./dom').DOMImplementation;\r\n\texports.XMLSerializer = require('./dom').XMLSerializer ;\r\n\texports.DOMParser = DOMParser;\r\n//}\r\n"],"file":"dom-parser.js"}