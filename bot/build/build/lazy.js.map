{"version":3,"sources":["../node_modules/d/lazy.js"],"names":["map","require","isCallable","validValue","contains","call","Function","defineProperty","Object","getOwnPropertyDescriptor","getPrototypeOf","hasOwnProperty","cacheDesc","configurable","enumerable","writable","value","define","options","cacheName","flat","resolvable","dgs","Boolean","name","ownDesc","desc","base","module"],"mappings":"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","sourcesContent":["'use strict';\n\nvar map        = require('es5-ext/object/map')\n  , isCallable = require('es5-ext/object/is-callable')\n  , validValue = require('es5-ext/object/valid-value')\n  , contains   = require('es5-ext/string/#/contains')\n\n  , call = Function.prototype.call\n  , defineProperty = Object.defineProperty\n  , getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor\n  , getPrototypeOf = Object.getPrototypeOf\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , cacheDesc = { configurable: false, enumerable: false, writable: false,\n\t\tvalue: null }\n  , define;\n\ndefine = function (name, options) {\n\tvar value, dgs, cacheName, desc, writable = false, resolvable\n\t  , flat;\n\toptions = Object(validValue(options));\n\tcacheName = options.cacheName;\n\tflat = options.flat;\n\tif (cacheName == null) cacheName = name;\n\tdelete options.cacheName;\n\tvalue = options.value;\n\tresolvable = isCallable(value);\n\tdelete options.value;\n\tdgs = { configurable: Boolean(options.configurable),\n\t\tenumerable: Boolean(options.enumerable) };\n\tif (name !== cacheName) {\n\t\tdgs.get = function () {\n\t\t\tif (hasOwnProperty.call(this, cacheName)) return this[cacheName];\n\t\t\tcacheDesc.value = resolvable ? call.call(value, this, options) : value;\n\t\t\tcacheDesc.writable = writable;\n\t\t\tdefineProperty(this, cacheName, cacheDesc);\n\t\t\tcacheDesc.value = null;\n\t\t\tif (desc) defineProperty(this, name, desc);\n\t\t\treturn this[cacheName];\n\t\t};\n\t} else if (!flat) {\n\t\tdgs.get = function self() {\n\t\t\tvar ownDesc;\n\t\t\tif (hasOwnProperty.call(this, name)) {\n\t\t\t\townDesc = getOwnPropertyDescriptor(this, name);\n\t\t\t\t// It happens in Safari, that getter is still called after property\n\t\t\t\t// was defined with a value, following workarounds that\n\t\t\t\t// While in IE11 it may happen that here ownDesc is undefined (go figure)\n\t\t\t\tif (ownDesc) {\n\t\t\t\t\tif (ownDesc.hasOwnProperty('value')) return ownDesc.value;\n\t\t\t\t\tif ((typeof ownDesc.get === 'function') && (ownDesc.get !== self)) {\n\t\t\t\t\t\treturn ownDesc.get.call(this);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdesc.value = resolvable ? call.call(value, this, options) : value;\n\t\t\tdefineProperty(this, name, desc);\n\t\t\tdesc.value = null;\n\t\t\treturn this[name];\n\t\t};\n\t} else {\n\t\tdgs.get = function self() {\n\t\t\tvar base = this, ownDesc;\n\t\t\tif (hasOwnProperty.call(this, name)) {\n\t\t\t\t// It happens in Safari, that getter is still called after property\n\t\t\t\t// was defined with a value, following workarounds that\n\t\t\t\townDesc = getOwnPropertyDescriptor(this, name);\n\t\t\t\tif (ownDesc.hasOwnProperty('value')) return ownDesc.value;\n\t\t\t\tif ((typeof ownDesc.get === 'function') && (ownDesc.get !== self)) {\n\t\t\t\t\treturn ownDesc.get.call(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (!hasOwnProperty.call(base, name)) base = getPrototypeOf(base);\n\t\t\tdesc.value = resolvable ? call.call(value, base, options) : value;\n\t\t\tdefineProperty(base, name, desc);\n\t\t\tdesc.value = null;\n\t\t\treturn base[name];\n\t\t};\n\t}\n\tdgs.set = function (value) {\n\t\tif (hasOwnProperty.call(this, name)) {\n\t\t\tthrow new TypeError(\"Cannot assign to lazy defined '\" + name + \"' property of \" + this);\n\t\t}\n\t\tdgs.get.call(this);\n\t\tthis[cacheName] = value;\n\t};\n\tif (options.desc) {\n\t\tdesc = {\n\t\t\tconfigurable: contains.call(options.desc, 'c'),\n\t\t\tenumerable: contains.call(options.desc, 'e')\n\t\t};\n\t\tif (cacheName === name) {\n\t\t\tdesc.writable = contains.call(options.desc, 'w');\n\t\t\tdesc.value = null;\n\t\t} else {\n\t\t\twritable = contains.call(options.desc, 'w');\n\t\t\tdesc.get = dgs.get;\n\t\t\tdesc.set = dgs.set;\n\t\t}\n\t\tdelete options.desc;\n\t} else if (cacheName === name) {\n\t\tdesc = {\n\t\t\tconfigurable: Boolean(options.configurable),\n\t\t\tenumerable: Boolean(options.enumerable),\n\t\t\twritable: Boolean(options.writable),\n\t\t\tvalue: null\n\t\t};\n\t}\n\tdelete options.configurable;\n\tdelete options.enumerable;\n\tdelete options.writable;\n\treturn dgs;\n};\n\nmodule.exports = function (props) {\n\treturn map(props, function (desc, name) { return define(name, desc); });\n};\n"],"file":"lazy.js"}