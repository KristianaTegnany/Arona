{"version":3,"sources":["../node_modules/promise-inflight/inflight.js"],"names":["module","Bluebird","require","active","inflight","unique","args","doFly","Array","_inflight","uniqueArr","resolve"],"mappings":"AAAA;;AACAA,MAAM,CAANA,OAAAA,GAAAA,QAAAA;AAEA,IAAA,QAAA;;AACA,IAAI;AACFC,EAAAA,QAAQ,GAAGC,OAAO,CAAlBD,UAAkB,CAAlBA;AADF,CAAA,CAEE,OAAA,CAAA,EAAU;AACVA,EAAAA,QAAQ,GAARA,OAAAA;AACD;;AAED,IAAME,MAAM,GAAZ,EAAA;AACAC,QAAQ,CAARA,MAAAA,GAAAA,MAAAA;;AACA,SAAA,QAAA,CAAA,MAAA,EAAA,KAAA,EAAkC;AAChC,SAAO,QAAQ,CAAR,GAAA,CAAa,CAAA,MAAA,EAAb,KAAa,CAAb,EAAA,IAAA,CAAmC,UAAA,IAAA,EAAgB;AACxD,QAAMC,MAAM,GAAGC,IAAI,CAAnB,CAAmB,CAAnB;AACA,QAAMC,KAAK,GAAGD,IAAI,CAAlB,CAAkB,CAAlB;;AACA,QAAIE,KAAK,CAALA,OAAAA,CAAJ,MAAIA,CAAJ,EAA2B;AACzB,aAAO,QAAQ,CAAR,GAAA,CAAA,MAAA,EAAA,IAAA,CAA0B,UAAA,SAAA,EAAqB;AACpD,eAAOC,SAAS,CAACC,SAAS,CAATA,IAAAA,CAAD,EAACA,CAAD,EAAhB,KAAgB,CAAhB;AADF,OAAO,CAAP;AADF,KAAA,MAIO;AACL,aAAOD,SAAS,CAAA,MAAA,EAAhB,KAAgB,CAAhB;AACD;AATH,GAAO,CAAP;;AAYA,WAAA,SAAA,CAAA,MAAA,EAAA,KAAA,EAAmC;AACjC,QAAI,CAACN,MAAM,CAAX,MAAW,CAAX,EAAqB;AAAA,UAKnB,OALmB,GAKnB,SAAA,OAAA,GAAmB;AAAE,eAAOA,MAAM,CAAb,MAAa,CAAb;AAAuB,OALzB;;AACnBA,MAAAA,MAAM,CAANA,MAAM,CAANA,GAAkB,IAAA,QAAA,CAAa,UAAA,OAAA,EAAmB;AAChD,eAAOQ,OAAO,CAACJ,KAAf,EAAc,CAAd;AADFJ,OAAkB,CAAlBA;AAGAA,MAAAA,MAAM,CAANA,MAAM,CAANA,CAAAA,IAAAA,CAAAA,OAAAA,EAAAA,OAAAA;AAED;;AACD,WAAOA,MAAM,CAAb,MAAa,CAAb;AACD;AACF","sourcesContent":["'use strict'\nmodule.exports = inflight\n\nlet Bluebird\ntry {\n  Bluebird = require('bluebird')\n} catch (_) {\n  Bluebird = Promise\n}\n\nconst active = {}\ninflight.active = active\nfunction inflight (unique, doFly) {\n  return Bluebird.all([unique, doFly]).then(function (args) {\n    const unique = args[0]\n    const doFly = args[1]\n    if (Array.isArray(unique)) {\n      return Bluebird.all(unique).then(function (uniqueArr) {\n        return _inflight(uniqueArr.join(''), doFly)\n      })\n    } else {\n      return _inflight(unique, doFly)\n    }\n  })\n\n  function _inflight (unique, doFly) {\n    if (!active[unique]) {\n      active[unique] = (new Bluebird(function (resolve) {\n        return resolve(doFly())\n      }))\n      active[unique].then(cleanup, cleanup)\n      function cleanup() { delete active[unique] }\n    }\n    return active[unique]\n  }\n}\n"],"file":"inflight.js"}