{"version":3,"sources":["../node_modules/external-editor/example_sync.js"],"names":["ExternalEditor","require","readline","rl","input","process","output","message","editor","response","err"],"mappings":";;AAAA,IAAIA,cAAc,GAAGC,OAAO,CAAPA,QAAO,CAAPA,CAArB,cAAA;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAtB,UAAsB,CAAtB;;AAEA,IAAIE,EAAE,GAAG,QAAQ,CAAR,eAAA,CAAyB;AAChCC,EAAAA,KAAK,EAAEC,OAAO,CADkB,KAAA;AAEhCC,EAAAA,MAAM,EAAE;AAFwB,CAAzB,CAAT;AAKA,IAAIC,OAAO,GAAX,qEAAA;AAEAF,OAAO,CAAPA,MAAAA,CAAAA,KAAAA,CAAAA,uEAAAA;AAEAG,MAAM,GAAG,IAAA,cAAA,CAATA,OAAS,CAATA;AAEAL,EAAE,CAAFA,EAAAA,CAAAA,MAAAA,EAAc,YAAY;AACxB,MAAI;AACF;AACA,QAAIM,QAAQ,GAAGD,MAAM,CAANA,GAAAA,GAAAA,OAAAA,CAAAA,WAAAA,EAAAA,EAAAA,EAAAA,OAAAA,CAAAA,OAAAA,EAAAA,EAAAA,EAAf,IAAeA,EAAf;;AAEA,QAAIA,MAAM,CAANA,cAAAA,KAAJ,CAAA,EAAiC;AAC/BH,MAAAA,OAAO,CAAPA,MAAAA,CAAAA,KAAAA,CAAAA,oDAAAA;AACD;;AAED,QAAII,QAAQ,CAARA,MAAAA,KAAJ,CAAA,EAA2B;AACzBP,MAAAA,QAAQ,CAARA,UAAAA,CAAoBG,OAAO,CAA3BH,MAAAA,EAAAA,CAAAA,EAAuC,CAAvCA,CAAAA;AACAG,MAAAA,OAAO,CAAPA,MAAAA,CAAAA,KAAAA,CAAAA,yFAAAA;AAFF,KAAA,MAGO;AACLA,MAAAA,OAAO,CAAPA,MAAAA,CAAAA,KAAAA,CAAAA,iBAAAA;AACAA,MAAAA,OAAO,CAAPA,MAAAA,CAAAA,KAAAA,CAAAA,QAAAA;AACAA,MAAAA,OAAO,CAAPA,MAAAA,CAAAA,KAAAA,CAAAA,IAAAA;AACAF,MAAAA,EAAE,CAAFA,KAAAA;AACD;AAhBH,GAAA,CAiBE,OAAA,GAAA,EAAY;AACZE,IAAAA,OAAO,CAAPA,MAAAA,CAAAA,KAAAA,CAAqBK,GAAG,CAAxBL,OAAAA;AACAA,IAAAA,OAAO,CAAPA,MAAAA,CAAAA,KAAAA,CAAAA,IAAAA;AACAF,IAAAA,EAAE,CAAFA,KAAAA;AACD;AAtBHA,CAAAA","sourcesContent":["var ExternalEditor = require('./main').ExternalEditor;\nvar readline = require('readline');\n\nvar rl = readline.createInterface({\n  input: process.stdin,\n  output: null\n});\n\nvar message = '\\n\\n# Please Write a message\\n# Any line starting with # is ignored';\n\nprocess.stdout.write('Please write a message. (press enter to launch your preferred editor)');\n\neditor = new ExternalEditor(message);\n\nrl.on('line', function () {\n  try {\n    // Get response, remove all lines starting with #, remove any trailing newlines.\n    var response = editor.run().replace(/^#.*\\n?/gm, '').replace(/\\n+$/g, '').trim();\n\n    if (editor.lastExitStatus !== 0) {\n      process.stderr.write(\"WARN: The editor exited with a non-zero status\\n\\n\")\n    }\n\n    if (response.length === 0) {\n      readline.moveCursor(process.stdout, 0, -1);\n      process.stdout.write('Your message was empty, please try again. (press enter to launch your preferred editor)');\n    } else {\n      process.stdout.write('Your Message:\\n');\n      process.stdout.write(response);\n      process.stdout.write('\\n');\n      rl.close();\n    }\n  } catch (err) {\n    process.stderr.write(err.message);\n    process.stdout.write('\\n');\n    rl.close();\n  }\n});\n"],"file":"example_sync.js"}