{"version":3,"sources":["../node_modules/tar-stream/headers.js"],"names":["ZEROS","ZERO_OFFSET","USTAR","clamp","index","toType","toTypeflag","alloc","buf","indexOf","offset","block","cksum","sum","i","encodeOct","val","n","decodeOct","parseInt","decodeStr","addLength","len","Buffer","digits","Math","exports","result","opts","b","keyIndex","name","prefix","typeflag","type","mode","uid","gid","size","mtime","linkname","uname","gname","devmajor","devminor","c"],"mappings":"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","sourcesContent":["var ZEROS = '0000000000000000000'\nvar ZERO_OFFSET = '0'.charCodeAt(0)\nvar USTAR = 'ustar\\x0000'\n\nvar clamp = function(index, len, defaultValue) {\n  if (typeof index !== 'number') return defaultValue\n  index = ~~index  // Coerce to integer.\n  if (index >= len) return len\n  if (index >= 0) return index\n  index += len\n  if (index >= 0) return index\n  return 0\n}\n\nvar toType = function(flag) {\n  switch (flag) {\n    case 0:\n    return 'file'\n    case 1:\n    return 'link'\n    case 2:\n    return 'symlink'\n    case 3:\n    return 'character-device'\n    case 4:\n    return 'block-device'\n    case 5:\n    return 'directory'\n    case 6:\n    return 'fifo'\n    case 7:\n    return 'contiguous-file'\n    case 72:\n    return 'pax-header'\n    case 55:\n    return 'pax-global-header'\n  }\n\n  return null\n}\n\nvar toTypeflag = function(flag) {\n  switch (flag) {\n    case 'file':\n    return 0\n    case 'link':\n    return 1\n    case 'symlink':\n    return 2\n    case 'character-device':\n    return 3\n    case 'block-device':\n    return 4\n    case 'directory':\n    return 5\n    case 'fifo':\n    return 6\n    case 'contiguous-file':\n    return 7\n    case 'pax-header':\n    return 72\n  }\n\n  return 0\n}\n\nvar alloc = function(size) {\n  var buf = new Buffer(size)\n  buf.fill(0)\n  return buf\n}\n\nvar indexOf = function(block, num, offset, end) {\n  for (; offset < end; offset++) {\n    if (block[offset] === num) return offset\n  }\n  return end\n}\n\nvar cksum = function(block) {\n  var sum = 8 * 32\n  for (var i = 0; i < 148; i++)   sum += block[i]\n  for (var i = 156; i < 512; i++) sum += block[i]\n  return sum\n}\n\nvar encodeOct = function(val, n) {\n  val = val.toString(8)\n  return ZEROS.slice(0, n-val.length)+val+' '\n}\n\nvar decodeOct = function(val, offset) {\n  // Older versions of tar can prefix with spaces\n  while (offset < val.length && val[offset] === 32) offset++\n\n  return parseInt(val.slice(offset, clamp(indexOf(val, 32, offset, val.length), val.length, val.length)).toString(), 8)\n}\n\nvar decodeStr = function(val, offset, length) {\n  return val.slice(offset, indexOf(val, 0, offset, offset+length)).toString();\n}\n\nvar addLength = function(str) {\n  var len = Buffer.byteLength(str)\n  var digits = Math.floor(Math.log(len) / Math.log(10)) + 1\n  if (len + digits > Math.pow(10, digits)) digits++\n\n  return (len+digits)+str\n}\n\nexports.encodePax = function(opts) { // TODO: encode more stuff in pax\n  var result = ''\n  if (opts.name) result += addLength(' path='+opts.name+'\\n')\n  if (opts.linkname) result += addLength(' linkpath='+opts.linkname+'\\n')\n  return new Buffer(result)\n}\n\nexports.decodePax = function(buf) {\n  var result = {}\n\n  while (buf.length) {\n    var i = 0\n    while (i < buf.length && buf[i] !== 32) i++\n\n    var len = parseInt(buf.slice(0, i).toString())\n    if (!len) return result\n\n    var b = buf.slice(i+1, len-1).toString()\n    var keyIndex = b.indexOf('=')\n    if (keyIndex === -1) return result\n    result[b.slice(0, keyIndex)] = b.slice(keyIndex+1)\n\n    buf = buf.slice(len)\n  }\n\n  return result\n}\n\nexports.encode = function(opts) {\n  var buf = alloc(512)\n  var name = opts.name\n  var prefix = ''\n\n  if (opts.typeflag === 5 && name[name.length-1] !== '/') name += '/'\n  if (Buffer.byteLength(name) !== name.length) return null // utf-8\n\n  while (Buffer.byteLength(name) > 100) {\n    var i = name.indexOf('/')\n    if (i === -1) return null\n    prefix += prefix ? '/' + name.slice(0, i) : name.slice(0, i)\n    name = name.slice(i+1)\n  }\n\n  if (Buffer.byteLength(name) > 100 || Buffer.byteLength(prefix) > 155) return null\n  if (opts.linkname && Buffer.byteLength(opts.linkname) > 100) return null\n\n  buf.write(name)\n  buf.write(encodeOct(opts.mode & '07777', 6), 100)\n  buf.write(encodeOct(opts.uid, 6), 108)\n  buf.write(encodeOct(opts.gid, 6), 116)\n  buf.write(encodeOct(opts.size, 11), 124)\n  buf.write(encodeOct((opts.mtime.getTime() / 1000) | 0, 11), 136)\n\n  buf[156] = ZERO_OFFSET + toTypeflag(opts.type)\n\n  if (opts.linkname) buf.write(opts.linkname, 157)\n\n  buf.write(USTAR, 257)\n  if (opts.uname) buf.write(opts.uname, 265)\n  if (opts.gname) buf.write(opts.gname, 297)\n  buf.write(encodeOct(opts.devmajor || 0, 6), 329)\n  buf.write(encodeOct(opts.devminor || 0, 6), 337)\n\n  if (prefix) buf.write(prefix, 345)\n\n  buf.write(encodeOct(cksum(buf), 6), 148)\n\n  return buf\n}\n\nexports.decode = function(buf) {\n  var typeflag = buf[156] === 0 ? 0 : buf[156] - ZERO_OFFSET\n  var type = toType(typeflag)\n\n  var name = decodeStr(buf, 0, 100)\n  var mode = decodeOct(buf, 100)\n  var uid = decodeOct(buf, 108)\n  var gid = decodeOct(buf, 116)\n  var size = decodeOct(buf, 124)\n  var mtime = decodeOct(buf, 136)\n  var linkname = buf[157] === 0 ? null : decodeStr(buf, 157, 100)\n  var uname = decodeStr(buf, 265, 32)\n  var gname = decodeStr(buf, 297, 32)\n  var devmajor = decodeOct(buf, 329)\n  var devminor = decodeOct(buf, 337)\n\n  if (buf[345]) name = decodeStr(buf, 345, 155)+'/'+name\n\n  var c = cksum(buf)\n\n  //checksum is still initial value if header was null.\n  if (c === 8*32) return null\n\n  //valid checksum\n  if (c !== decodeOct(buf, 148)) throw new Error('invalid header')\n\n  return {\n    name: name,\n    mode: mode,\n    uid: uid,\n    gid: gid,\n    size: size,\n    mtime: new Date(1000 * mtime),\n    type: toType(typeflag),\n    linkname: linkname,\n    uname: uname,\n    gname: gname,\n    devmajor: devmajor,\n    devminor: devminor\n  }\n}\n"],"file":"headers.js"}