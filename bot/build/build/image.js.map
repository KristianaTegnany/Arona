{"version":3,"sources":["../node_modules/nodejs-bing/image.js"],"names":["exports","module","hack","filters","rp","require","cheerio","urlencode","query","url","results","$","items","result"],"mappings":";;AAAAA,OAAO,GAAGC,MAAM,CAANA,OAAAA,GAAiB,UAAA,KAAA,EAA0C;AAAA,MAAzBC,IAAyB,uEAA1C,EAA0C;AAAA,MAAdC,OAAc,uEAA1C,EAA0C;;AACpE,MAAIC,EAAE,GAAGC,OAAO,CAAhB,iBAAgB,CAAhB;;AACA,MAAIC,OAAO,GAAGD,OAAO,CAArB,SAAqB,CAArB;;AACA,MAAIE,SAAS,GAAGF,OAAO,CAAvB,WAAuB,CAAvB;;AAEAG,EAAAA,KAAK,GAAGA,KAAK,CAALA,IAAAA,KAAAA,GAAAA,GAAqBN,IAAI,CAAjCM,IAA6BN,EAA7BM;AACA,MAAIC,GAAG,GAAG,yCAAyCF,SAAS,CAA5D,KAA4D,CAA5D;;AAEA,MAAGJ,OAAO,CAAPA,MAAAA,GAAH,CAAA,EAAsB;AACrBM,IAAAA,GAAG,GAAGA,GAAG,GAAHA,OAAAA,GAAgBN,OAAO,CAAPA,IAAAA,CAAtBM,EAAsBN,CAAtBM;AACA;;AAED,MAAIC,OAAO,GAAX,EAAA;AAEA,SAAO,EAAE,CAAF,GAAE,CAAF,CAAA,IAAA,CACA,UAAA,IAAA,EAAe;AACpBC,IAAAA,CAAC,GAAGL,OAAO,CAAPA,IAAAA,CAAJK,IAAIL,CAAJK;AACAC,IAAAA,KAAK,GAAGD,CAAC,CAATC,UAAS,CAATA;AAEAD,IAAAA,CAAC,CAADA,KAAC,CAADA,CAAAA,IAAAA,CAAc,UAAA,CAAA,EAAA,IAAA,EAAkB;AAC/BE,MAAAA,MAAM,GAANA,EAAAA;AACAA,MAAAA,MAAM,CAANA,QAAAA,GAAkBF,CAAC,CAADA,IAAC,CAADA,CAAAA,IAAAA,CAAAA,SAAAA,EAAAA,IAAAA,CAAlBE,MAAkBF,CAAlBE;AACAA,MAAAA,MAAM,CAANA,IAAAA,GAAcF,CAAC,CAADA,IAAC,CAADA,CAAAA,IAAAA,CAAAA,OAAAA,EAAAA,IAAAA,CAAdE,MAAcF,CAAdE;AACAA,MAAAA,MAAM,CAANA,KAAAA,GAAeF,CAAC,CAADA,IAAC,CAADA,CAAAA,IAAAA,CAAAA,SAAAA,EAAfE,IAAeF,EAAfE;AACAA,MAAAA,MAAM,CAANA,IAAAA,GAAcF,CAAC,CAADA,IAAC,CAADA,CAAAA,IAAAA,CAAAA,cAAAA,EAAdE,IAAcF,EAAdE;AAEAH,MAAAA,OAAO,CAAPA,IAAAA,CAAAA,MAAAA;AAPDC,KAAAA;AAUA,WAAA,OAAA;AAfF,GAAO,CAAP;AAdDX,CAAAA","sourcesContent":["exports = module.exports = function (query, hack = '', filters = []) {\n\tvar rp = require('request-promise')\n\tvar cheerio = require('cheerio')\n\tvar urlencode = require('urlencode')\n\n\tquery = query.trim() + ' ' + hack.trim()\n\tvar url = 'http://www.bing.com/images/search?q=' + urlencode(query)\n\n\tif(filters.length > 0){\n\t\turl = url + '&qft=' + filters.join('')\n\t}\n\n\tvar results = []\n\n\treturn rp(url)\n\t\t.then(function(body) {\n\t\t\t$ = cheerio.load(body)\n\t\t\titems = $('div.item')\t\n\n\t\t\t$(items).each(function(i, item) {\n\t\t\t\tresult = {}\n\t\t\t\tresult.mediaurl = $(item).find('a.thumb').attr('href')\n\t\t\t\tresult.link = $(item).find('a.tit').attr('href')\n\t\t\t\tresult.title = $(item).find('div.des').html()\n\t\t\t\tresult.size = $(item).find('div.fileInfo').html()\n\n\t\t\t\tresults.push(result)\n\t\t\t})\n\n\t\t\treturn results\n\t\t})\n}\n\n\n"],"file":"image.js"}