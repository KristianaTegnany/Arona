{"version":3,"sources":["../node_modules/nodejs-bing/video.js"],"names":["exports","module","hack","filters","rp","require","cheerio","urlencode","urlparser","query","url","results","$","items","result","link"],"mappings":";;AAAAA,OAAO,GAAGC,MAAM,CAANA,OAAAA,GAAiB,UAAA,KAAA,EAA0C;AAAA,MAAzBC,IAAyB,uEAA1C,EAA0C;AAAA,MAAdC,OAAc,uEAA1C,EAA0C;;AACpE,MAAIC,EAAE,GAAGC,OAAO,CAAhB,iBAAgB,CAAhB;;AACA,MAAIC,OAAO,GAAGD,OAAO,CAArB,SAAqB,CAArB;;AACA,MAAIE,SAAS,GAAGF,OAAO,CAAvB,WAAuB,CAAvB;;AACA,MAAIG,SAAS,GAAGH,OAAO,CAAvB,KAAuB,CAAvB;;AAEAI,EAAAA,KAAK,GAAGA,KAAK,CAALA,IAAAA,KAAAA,GAAAA,GAAqBP,IAAI,CAAjCO,IAA6BP,EAA7BO;AACA,MAAIC,GAAG,GAAG,yCAAyCH,SAAS,CAA5D,KAA4D,CAA5D;AAEAG,EAAAA,GAAG,GAAGA,GAAG,GAAHA,kCAAAA,GAA2CP,OAAO,CAAPA,IAAAA,CAAjDO,EAAiDP,CAAjDO;AAEA,MAAIC,OAAO,GAAX,EAAA;AAEA,SAAO,EAAE,CAAF,GAAE,CAAF,CAAA,IAAA,CACA,UAAA,IAAA,EAAe;AACpBC,IAAAA,CAAC,GAAGN,OAAO,CAAPA,IAAAA,CAAJM,IAAIN,CAAJM;AACAC,IAAAA,KAAK,GAAGD,CAAC,CAATC,eAAS,CAATA;AAEAD,IAAAA,CAAC,CAADA,KAAC,CAADA,CAAAA,IAAAA,CAAc,UAAA,CAAA,EAAA,IAAA,EAAkB;AAC/BE,MAAAA,MAAM,GAANA,EAAAA;;AACA,UAAGF,CAAC,CAADA,IAAC,CAADA,CAAAA,IAAAA,CAAAA,gBAAAA,EAAAA,IAAAA,CAAH,OAAGA,CAAH,EAAgD;AAC/CE,QAAAA,MAAM,CAANA,KAAAA,GAAeF,CAAC,CAADA,IAAC,CAADA,CAAAA,IAAAA,CAAAA,gBAAAA,EAAAA,IAAAA,CAAfE,OAAeF,CAAfE;AADD,OAAA,MAEK;AACJA,QAAAA,MAAM,CAANA,KAAAA,GAAeF,CAAC,CAADA,IAAC,CAADA,CAAAA,IAAAA,CAAAA,WAAAA,EAAfE,IAAeF,EAAfE;AACA;;AAED,UAAIC,IAAI,GAAGH,CAAC,CAADA,IAAC,CAADA,CAAAA,IAAAA,CAAAA,GAAAA,EAAAA,IAAAA,CAAX,MAAWA,CAAX;AACA,UAAIH,KAAK,GAAGD,SAAS,CAATA,KAAAA,CAAAA,IAAAA,EAAAA,IAAAA,EAAZ,KAAA;AAEAM,MAAAA,MAAM,CAANA,IAAAA,GAAc,qCAAqCL,KAAK,CAAxDK,CAAAA;AACAA,MAAAA,MAAM,CAANA,OAAAA,GAAiBL,KAAK,CAAtBK,CAAAA;AACAA,MAAAA,MAAM,CAANA,SAAAA,GAAmB,4BAA4BL,KAAK,CAAjC,CAAA,GAAnBK,cAAAA;AACAA,MAAAA,MAAM,CAANA,YAAAA,GAAsB,4BAA4BL,KAAK,CAAjC,CAAA,GAAtBK,gBAAAA;AACAA,MAAAA,MAAM,CAANA,YAAAA,GAAsB,4BAA4BL,KAAK,CAAjC,CAAA,GAAtBK,gBAAAA;AAEAH,MAAAA,OAAO,CAAPA,IAAAA,CAAAA,MAAAA;AAjBDC,KAAAA;AAoBA,WAAA,OAAA;AAzBF,GAAO,CAAP;AAbDZ,CAAAA","sourcesContent":["exports = module.exports = function (query, hack = '', filters = []) {\n\tvar rp = require('request-promise')\n\tvar cheerio = require('cheerio')\n\tvar urlencode = require('urlencode')\n\tvar urlparser = require('url')\n\n\tquery = query.trim() + ' ' + hack.trim()\n\tvar url = 'http://www.bing.com/videos/search?q=' + urlencode(query)\n\n\turl = url + '&qft=+filterui:msite-youtube.com' + filters.join('')\n\n\tvar results = []\n\n\treturn rp(url)\n\t\t.then(function(body) {\n\t\t\t$ = cheerio.load(body)\n\t\t\titems = $('td.resultCell')\t\n\n\t\t\t$(items).each(function(i, item) {\n\t\t\t\tresult = {}\n\t\t\t\tif($(item).find('div.title span').attr('title')){\n\t\t\t\t\tresult.title = $(item).find('div.title span').attr('title')\n\t\t\t\t}else{\n\t\t\t\t\tresult.title = $(item).find('div.title').text()\n\t\t\t\t}\n\n\t\t\t\tvar link = $(item).find('a').attr('href')\n\t\t\t\tvar query = urlparser.parse(link, true).query\n\n\t\t\t\tresult.link = \"https://www.youtube.com/watch?v=\" + query.v\n\t\t\t\tresult.videoid = query.v\n\t\t\t\tresult.thumbnail = \"https://i.ytimg.com/vi/\" + query.v + \"/default.jpg\";\n\t\t\t\tresult.thumbnail_mq = \"https://i.ytimg.com/vi/\" + query.v + \"/mqdefault.jpg\";\n\t\t\t\tresult.thumbnail_hq = \"https://i.ytimg.com/vi/\" + query.v + \"/hqdefault.jpg\";\n\n\t\t\t\tresults.push(result)\n\t\t\t})\n\n\t\t\treturn results\n\t\t})\n}\n\n\n"],"file":"video.js"}