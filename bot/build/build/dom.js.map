{"version":3,"sources":["../node_modules/xmldom/dom.js"],"names":["dest","src","pt","Class","Object","ppt","Super","t","copy","console","htmlns","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","message","error","Error","DOMException","NodeList","length","item","toString","buf","i","serializeToString","_updateLiveList","inc","list","ls","__set__","LiveNodeList","_extends","_findNodeIndex","newAttr","doc","el","oldAttr","_onRemoveAttribute","_onAddAttribute","lastIndex","attr","NamedNodeMap","getNamedItem","setNamedItem","_addNamedNode","setNamedItemNS","removeNamedItem","_removeNamedNode","removeNamedItemNS","getNamedItemNS","node","features","DOMImplementation","hasFeature","versions","feature","version","createDocument","root","createDocumentType","Node","firstChild","lastChild","previousSibling","nextSibling","attributes","parentNode","childNodes","ownerDocument","nodeValue","namespaceURI","prefix","localName","insertBefore","_insertBefore","replaceChild","removeChild","_removeChild","appendChild","hasChildNodes","cloneNode","normalize","child","next","isSupported","hasAttributes","lookupPrefix","map","lookupNamespaceURI","isDefaultNamespace","c","callback","_visitNode","ns","cs","previous","_onUpdateChild","cp","newChild","newFirst","newLast","pre","nextChild","Document","nodeName","nodeType","doctype","documentElement","_inc","importNode","getElementById","rtv","createElement","attrs","createDocumentFragment","createTextNode","createComment","createCDATASection","createProcessingInstruction","createAttribute","createEntityReference","createElementNS","pl","qualifiedName","createAttributeNS","Element","hasAttribute","getAttribute","getAttributeNode","setAttribute","removeAttribute","_appendSingleChild","setAttributeNode","setAttributeNodeNS","removeAttributeNode","removeAttributeNS","old","hasAttributeNS","getAttributeNS","setAttributeNS","getAttributeNodeNS","getElementsByTagName","tagName","getElementsByTagNameNS","Attr","CharacterData","data","substringData","offset","appendData","text","insertData","deleteData","replaceData","start","end","Text","splitText","newText","newNode","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","XMLSerializer","nodeSerializeToString","refNode","uri","visibleNamespaces","namespace","nodeFilter","startVisibleNamespaces","len","isHTML","value","needNamespaceDefine","pubid","sysid","sub","node2","deep","v","attrs2","object","get","getTextContent","set","String","exports"],"mappings":"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","sourcesContent":["/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(Object.create){\n\t\tvar ppt = Object.create(Super.prototype)\n\t\tpt.__proto__ = ppt;\n\t}\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknow Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\nvar htmlns = 'http://www.w3.org/1999/xhtml' ;\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t}\n};\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\nfunction DOMImplementation(/* Object */ features) {\n\tthis._features = {};\n\tif (features) {\n\t\tfor (var feature in features) {\n\t\t\t this._features = features[feature];\n\t\t}\n\t}\n};\n\nDOMImplementation.prototype = {\n\thasFeature: function(/* string */ feature, /* string */ version) {\n\t\tvar versions = this._features[feature.toLowerCase()];\n\t\tif (versions && (!version || version in versions)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocument:function(namespaceURI,  qualifiedName, doctype){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype;\n\t\tif(doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif(qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI,qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocumentType:function(qualifiedName, publicId, systemId){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId;\n\t\tnode.systemId = systemId;\n\t\t// Introduced in DOM Level 2:\n\t\t//readonly attribute DOMString        internalSubset;\n\t\t\n\t\t//TODO:..\n\t\t//  readonly attribute NamedNodeMap     entities;\n\t\t//  readonly attribute NamedNodeMap     notations;\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else{\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else{\n\t\tparentNode.firstChild = next\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else{\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn newChild;\n\t\t}\n\t\tvar newLast = newChild.lastChild;\n\t}else{\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else{\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else{\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\t\n\tinsertBefore :  function(newChild, refChild){//raises \n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == ELEMENT_NODE){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t\t\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\t\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t\t\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9?this.documentElement:this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\t\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\nfunction needNamespaceDefine(node,isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix||'';\n\tvar uri = node.namespaceURI;\n\tif (!prefix && !uri){\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === \"http://www.w3.org/XML/1998/namespace\" \n\t\t|| uri == 'http://www.w3.org/2000/xmlns/'){\n\t\treturn false;\n\t}\n\t\n\tvar i = visibleNamespaces.length \n\t//console.log('@@@@',node.tagName,prefix,uri,visibleNamespaces)\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\t//console.log(node.nodeType,node.tagName,ns.prefix,prefix)\n\t\tif (ns.prefix == prefix){\n\t\t\treturn ns.namespace != uri;\n\t\t}\n\t}\n\t//console.log(isHTML,uri,prefix=='')\n\t//if(isHTML && prefix ==null && uri == 'http://www.w3.org/1999/xhtml'){\n\t//\treturn false;\n\t//}\n\t//node.flag = '11111'\n\t//console.error(3,true,node.flag,node.prefix,node.namespaceURI)\n\treturn true;\n}\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tif (!visibleNamespaces) visibleNamespaces = [];\n\t\tvar startVisibleNamespaces = visibleNamespaces.length;\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\t\n\t\tisHTML =  (htmlns === node.namespaceURI) ||isHTML \n\t\tbuf.push('<',nodeName);\n\t\t\n\t\t\n\t\t\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\t\t// add namespace for current node\t\t\n\t\tif (needNamespaceDefine(node,isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\t\t\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',nodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn buf.push(' ',node.name,'=\"',node.value.replace(/[<&\"]/g,_xmlEncoder),'\"');\n\tcase TEXT_NODE:\n\t\treturn buf.push(node.data.replace(/[<&]/g,_xmlEncoder));\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC \"',pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push( '\" \"',sysid);\n\t\t\t}\n\t\t\tbuf.push('\">');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM \"',sysid,'\">');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE：\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//TODO:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DOMImplementation = DOMImplementation;\n\texports.XMLSerializer = XMLSerializer;\n//}\n"],"file":"dom.js"}