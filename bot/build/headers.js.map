{"version":3,"sources":["../node_modules/tar-stream/headers.js"],"names":["ZEROS","ZERO_OFFSET","charCodeAt","USTAR","clamp","index","len","defaultValue","toType","flag","toTypeflag","alloc","size","buf","Buffer","fill","indexOf","block","num","offset","end","cksum","sum","i","encodeOct","val","n","toString","slice","length","decodeOct","parseInt","decodeStr","addLength","str","byteLength","digits","Math","floor","log","pow","exports","encodePax","opts","result","name","linkname","decodePax","b","keyIndex","encode","prefix","typeflag","write","mode","uid","gid","mtime","getTime","type","uname","gname","devmajor","devminor","decode","c","Error","Date"],"mappings":"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","sourcesContent":["var ZEROS = '0000000000000000000'\nvar ZERO_OFFSET = '0'.charCodeAt(0)\nvar USTAR = 'ustar\\x0000'\n\nvar clamp = function(index, len, defaultValue) {\n  if (typeof index !== 'number') return defaultValue\n  index = ~~index  // Coerce to integer.\n  if (index >= len) return len\n  if (index >= 0) return index\n  index += len\n  if (index >= 0) return index\n  return 0\n}\n\nvar toType = function(flag) {\n  switch (flag) {\n    case 0:\n    return 'file'\n    case 1:\n    return 'link'\n    case 2:\n    return 'symlink'\n    case 3:\n    return 'character-device'\n    case 4:\n    return 'block-device'\n    case 5:\n    return 'directory'\n    case 6:\n    return 'fifo'\n    case 7:\n    return 'contiguous-file'\n    case 72:\n    return 'pax-header'\n    case 55:\n    return 'pax-global-header'\n  }\n\n  return null\n}\n\nvar toTypeflag = function(flag) {\n  switch (flag) {\n    case 'file':\n    return 0\n    case 'link':\n    return 1\n    case 'symlink':\n    return 2\n    case 'character-device':\n    return 3\n    case 'block-device':\n    return 4\n    case 'directory':\n    return 5\n    case 'fifo':\n    return 6\n    case 'contiguous-file':\n    return 7\n    case 'pax-header':\n    return 72\n  }\n\n  return 0\n}\n\nvar alloc = function(size) {\n  var buf = new Buffer(size)\n  buf.fill(0)\n  return buf\n}\n\nvar indexOf = function(block, num, offset, end) {\n  for (; offset < end; offset++) {\n    if (block[offset] === num) return offset\n  }\n  return end\n}\n\nvar cksum = function(block) {\n  var sum = 8 * 32\n  for (var i = 0; i < 148; i++)   sum += block[i]\n  for (var i = 156; i < 512; i++) sum += block[i]\n  return sum\n}\n\nvar encodeOct = function(val, n) {\n  val = val.toString(8)\n  return ZEROS.slice(0, n-val.length)+val+' '\n}\n\nvar decodeOct = function(val, offset) {\n  // Older versions of tar can prefix with spaces\n  while (offset < val.length && val[offset] === 32) offset++\n\n  return parseInt(val.slice(offset, clamp(indexOf(val, 32, offset, val.length), val.length, val.length)).toString(), 8)\n}\n\nvar decodeStr = function(val, offset, length) {\n  return val.slice(offset, indexOf(val, 0, offset, offset+length)).toString();\n}\n\nvar addLength = function(str) {\n  var len = Buffer.byteLength(str)\n  var digits = Math.floor(Math.log(len) / Math.log(10)) + 1\n  if (len + digits > Math.pow(10, digits)) digits++\n\n  return (len+digits)+str\n}\n\nexports.encodePax = function(opts) { // TODO: encode more stuff in pax\n  var result = ''\n  if (opts.name) result += addLength(' path='+opts.name+'\\n')\n  if (opts.linkname) result += addLength(' linkpath='+opts.linkname+'\\n')\n  return new Buffer(result)\n}\n\nexports.decodePax = function(buf) {\n  var result = {}\n\n  while (buf.length) {\n    var i = 0\n    while (i < buf.length && buf[i] !== 32) i++\n\n    var len = parseInt(buf.slice(0, i).toString())\n    if (!len) return result\n\n    var b = buf.slice(i+1, len-1).toString()\n    var keyIndex = b.indexOf('=')\n    if (keyIndex === -1) return result\n    result[b.slice(0, keyIndex)] = b.slice(keyIndex+1)\n\n    buf = buf.slice(len)\n  }\n\n  return result\n}\n\nexports.encode = function(opts) {\n  var buf = alloc(512)\n  var name = opts.name\n  var prefix = ''\n\n  if (opts.typeflag === 5 && name[name.length-1] !== '/') name += '/'\n  if (Buffer.byteLength(name) !== name.length) return null // utf-8\n\n  while (Buffer.byteLength(name) > 100) {\n    var i = name.indexOf('/')\n    if (i === -1) return null\n    prefix += prefix ? '/' + name.slice(0, i) : name.slice(0, i)\n    name = name.slice(i+1)\n  }\n\n  if (Buffer.byteLength(name) > 100 || Buffer.byteLength(prefix) > 155) return null\n  if (opts.linkname && Buffer.byteLength(opts.linkname) > 100) return null\n\n  buf.write(name)\n  buf.write(encodeOct(opts.mode & '07777', 6), 100)\n  buf.write(encodeOct(opts.uid, 6), 108)\n  buf.write(encodeOct(opts.gid, 6), 116)\n  buf.write(encodeOct(opts.size, 11), 124)\n  buf.write(encodeOct((opts.mtime.getTime() / 1000) | 0, 11), 136)\n\n  buf[156] = ZERO_OFFSET + toTypeflag(opts.type)\n\n  if (opts.linkname) buf.write(opts.linkname, 157)\n\n  buf.write(USTAR, 257)\n  if (opts.uname) buf.write(opts.uname, 265)\n  if (opts.gname) buf.write(opts.gname, 297)\n  buf.write(encodeOct(opts.devmajor || 0, 6), 329)\n  buf.write(encodeOct(opts.devminor || 0, 6), 337)\n\n  if (prefix) buf.write(prefix, 345)\n\n  buf.write(encodeOct(cksum(buf), 6), 148)\n\n  return buf\n}\n\nexports.decode = function(buf) {\n  var typeflag = buf[156] === 0 ? 0 : buf[156] - ZERO_OFFSET\n  var type = toType(typeflag)\n\n  var name = decodeStr(buf, 0, 100)\n  var mode = decodeOct(buf, 100)\n  var uid = decodeOct(buf, 108)\n  var gid = decodeOct(buf, 116)\n  var size = decodeOct(buf, 124)\n  var mtime = decodeOct(buf, 136)\n  var linkname = buf[157] === 0 ? null : decodeStr(buf, 157, 100)\n  var uname = decodeStr(buf, 265, 32)\n  var gname = decodeStr(buf, 297, 32)\n  var devmajor = decodeOct(buf, 329)\n  var devminor = decodeOct(buf, 337)\n\n  if (buf[345]) name = decodeStr(buf, 345, 155)+'/'+name\n\n  var c = cksum(buf)\n\n  //checksum is still initial value if header was null.\n  if (c === 8*32) return null\n\n  //valid checksum\n  if (c !== decodeOct(buf, 148)) throw new Error('invalid header')\n\n  return {\n    name: name,\n    mode: mode,\n    uid: uid,\n    gid: gid,\n    size: size,\n    mtime: new Date(1000 * mtime),\n    type: toType(typeflag),\n    linkname: linkname,\n    uname: uname,\n    gname: gname,\n    devmajor: devmajor,\n    devminor: devminor\n  }\n}\n"],"file":"headers.js"}