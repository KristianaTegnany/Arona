{"version":3,"sources":["../node_modules/d/lazy.js"],"names":["map","require","isCallable","validValue","contains","call","Function","prototype","defineProperty","Object","getOwnPropertyDescriptor","getPrototypeOf","hasOwnProperty","cacheDesc","configurable","enumerable","writable","value","define","name","options","dgs","cacheName","desc","resolvable","flat","Boolean","get","self","ownDesc","base","set","TypeError","module","exports","props"],"mappings":"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","sourcesContent":["'use strict';\n\nvar map        = require('es5-ext/object/map')\n  , isCallable = require('es5-ext/object/is-callable')\n  , validValue = require('es5-ext/object/valid-value')\n  , contains   = require('es5-ext/string/#/contains')\n\n  , call = Function.prototype.call\n  , defineProperty = Object.defineProperty\n  , getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor\n  , getPrototypeOf = Object.getPrototypeOf\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , cacheDesc = { configurable: false, enumerable: false, writable: false,\n\t\tvalue: null }\n  , define;\n\ndefine = function (name, options) {\n\tvar value, dgs, cacheName, desc, writable = false, resolvable\n\t  , flat;\n\toptions = Object(validValue(options));\n\tcacheName = options.cacheName;\n\tflat = options.flat;\n\tif (cacheName == null) cacheName = name;\n\tdelete options.cacheName;\n\tvalue = options.value;\n\tresolvable = isCallable(value);\n\tdelete options.value;\n\tdgs = { configurable: Boolean(options.configurable),\n\t\tenumerable: Boolean(options.enumerable) };\n\tif (name !== cacheName) {\n\t\tdgs.get = function () {\n\t\t\tif (hasOwnProperty.call(this, cacheName)) return this[cacheName];\n\t\t\tcacheDesc.value = resolvable ? call.call(value, this, options) : value;\n\t\t\tcacheDesc.writable = writable;\n\t\t\tdefineProperty(this, cacheName, cacheDesc);\n\t\t\tcacheDesc.value = null;\n\t\t\tif (desc) defineProperty(this, name, desc);\n\t\t\treturn this[cacheName];\n\t\t};\n\t} else if (!flat) {\n\t\tdgs.get = function self() {\n\t\t\tvar ownDesc;\n\t\t\tif (hasOwnProperty.call(this, name)) {\n\t\t\t\townDesc = getOwnPropertyDescriptor(this, name);\n\t\t\t\t// It happens in Safari, that getter is still called after property\n\t\t\t\t// was defined with a value, following workarounds that\n\t\t\t\t// While in IE11 it may happen that here ownDesc is undefined (go figure)\n\t\t\t\tif (ownDesc) {\n\t\t\t\t\tif (ownDesc.hasOwnProperty('value')) return ownDesc.value;\n\t\t\t\t\tif ((typeof ownDesc.get === 'function') && (ownDesc.get !== self)) {\n\t\t\t\t\t\treturn ownDesc.get.call(this);\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdesc.value = resolvable ? call.call(value, this, options) : value;\n\t\t\tdefineProperty(this, name, desc);\n\t\t\tdesc.value = null;\n\t\t\treturn this[name];\n\t\t};\n\t} else {\n\t\tdgs.get = function self() {\n\t\t\tvar base = this, ownDesc;\n\t\t\tif (hasOwnProperty.call(this, name)) {\n\t\t\t\t// It happens in Safari, that getter is still called after property\n\t\t\t\t// was defined with a value, following workarounds that\n\t\t\t\townDesc = getOwnPropertyDescriptor(this, name);\n\t\t\t\tif (ownDesc.hasOwnProperty('value')) return ownDesc.value;\n\t\t\t\tif ((typeof ownDesc.get === 'function') && (ownDesc.get !== self)) {\n\t\t\t\t\treturn ownDesc.get.call(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (!hasOwnProperty.call(base, name)) base = getPrototypeOf(base);\n\t\t\tdesc.value = resolvable ? call.call(value, base, options) : value;\n\t\t\tdefineProperty(base, name, desc);\n\t\t\tdesc.value = null;\n\t\t\treturn base[name];\n\t\t};\n\t}\n\tdgs.set = function (value) {\n\t\tif (hasOwnProperty.call(this, name)) {\n\t\t\tthrow new TypeError(\"Cannot assign to lazy defined '\" + name + \"' property of \" + this);\n\t\t}\n\t\tdgs.get.call(this);\n\t\tthis[cacheName] = value;\n\t};\n\tif (options.desc) {\n\t\tdesc = {\n\t\t\tconfigurable: contains.call(options.desc, 'c'),\n\t\t\tenumerable: contains.call(options.desc, 'e')\n\t\t};\n\t\tif (cacheName === name) {\n\t\t\tdesc.writable = contains.call(options.desc, 'w');\n\t\t\tdesc.value = null;\n\t\t} else {\n\t\t\twritable = contains.call(options.desc, 'w');\n\t\t\tdesc.get = dgs.get;\n\t\t\tdesc.set = dgs.set;\n\t\t}\n\t\tdelete options.desc;\n\t} else if (cacheName === name) {\n\t\tdesc = {\n\t\t\tconfigurable: Boolean(options.configurable),\n\t\t\tenumerable: Boolean(options.enumerable),\n\t\t\twritable: Boolean(options.writable),\n\t\t\tvalue: null\n\t\t};\n\t}\n\tdelete options.configurable;\n\tdelete options.enumerable;\n\tdelete options.writable;\n\treturn dgs;\n};\n\nmodule.exports = function (props) {\n\treturn map(props, function (desc, name) { return define(name, desc); });\n};\n"],"file":"lazy.js"}