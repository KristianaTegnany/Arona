{"version":3,"sources":["../node_modules/graceful-fs/legacy-streams.js"],"names":["Stream","require","module","ReadStream","WriteStream","self","options","keys","Object","index","length","key","TypeError","process","fs"],"mappings":"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","sourcesContent":["var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n"],"file":"legacy-streams.js"}