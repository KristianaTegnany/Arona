{"version":3,"sources":["../node_modules/mute-stream/mute.js"],"names":["Stream","require","module","opts","MuteStream","Object","value","enumerable","writable","configurable","get","set","c","d","s","proxy"],"mappings":"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","sourcesContent":["var Stream = require('stream')\n\nmodule.exports = MuteStream\n\n// var out = new MuteStream(process.stdout)\n// argument auto-pipes\nfunction MuteStream (opts) {\n  Stream.apply(this)\n  opts = opts || {}\n  this.writable = this.readable = true\n  this.muted = false\n  this.on('pipe', this._onpipe)\n  this.replace = opts.replace\n\n  // For readline-type situations\n  // This much at the start of a line being redrawn after a ctrl char\n  // is seen (such as backspace) won't be redrawn as the replacement\n  this._prompt = opts.prompt || null\n  this._hadControl = false\n}\n\nMuteStream.prototype = Object.create(Stream.prototype)\n\nObject.defineProperty(MuteStream.prototype, 'constructor', {\n  value: MuteStream,\n  enumerable: false\n})\n\nMuteStream.prototype.mute = function () {\n  this.muted = true\n}\n\nMuteStream.prototype.unmute = function () {\n  this.muted = false\n}\n\nObject.defineProperty(MuteStream.prototype, '_onpipe', {\n  value: onPipe,\n  enumerable: false,\n  writable: true,\n  configurable: true\n})\n\nfunction onPipe (src) {\n  this._src = src\n}\n\nObject.defineProperty(MuteStream.prototype, 'isTTY', {\n  get: getIsTTY,\n  set: setIsTTY,\n  enumerable: true,\n  configurable: true\n})\n\nfunction getIsTTY () {\n  return( (this._dest) ? this._dest.isTTY\n        : (this._src) ? this._src.isTTY\n        : false\n        )\n}\n\n// basically just get replace the getter/setter with a regular value\nfunction setIsTTY (isTTY) {\n  Object.defineProperty(this, 'isTTY', {\n    value: isTTY,\n    enumerable: true,\n    writable: true,\n    configurable: true\n  })\n}\n\nObject.defineProperty(MuteStream.prototype, 'rows', {\n  get: function () {\n    return( this._dest ? this._dest.rows\n          : this._src ? this._src.rows\n          : undefined )\n  }, enumerable: true, configurable: true })\n\nObject.defineProperty(MuteStream.prototype, 'columns', {\n  get: function () {\n    return( this._dest ? this._dest.columns\n          : this._src ? this._src.columns\n          : undefined )\n  }, enumerable: true, configurable: true })\n\n\nMuteStream.prototype.pipe = function (dest, options) {\n  this._dest = dest\n  return Stream.prototype.pipe.call(this, dest, options)\n}\n\nMuteStream.prototype.pause = function () {\n  if (this._src) return this._src.pause()\n}\n\nMuteStream.prototype.resume = function () {\n  if (this._src) return this._src.resume()\n}\n\nMuteStream.prototype.write = function (c) {\n  if (this.muted) {\n    if (!this.replace) return true\n    if (c.match(/^\\u001b/)) {\n      if(c.indexOf(this._prompt) === 0) {\n        c = c.substr(this._prompt.length);\n        c = c.replace(/./g, this.replace);\n        c = this._prompt + c;\n      }\n      this._hadControl = true\n      return this.emit('data', c)\n    } else {\n      if (this._prompt && this._hadControl &&\n          c.indexOf(this._prompt) === 0) {\n        this._hadControl = false\n        this.emit('data', this._prompt)\n        c = c.substr(this._prompt.length)\n      }\n      c = c.toString().replace(/./g, this.replace)\n    }\n  }\n  this.emit('data', c)\n}\n\nMuteStream.prototype.end = function (c) {\n  if (this.muted) {\n    if (c && this.replace) {\n      c = c.toString().replace(/./g, this.replace)\n    } else {\n      c = null\n    }\n  }\n  if (c) this.emit('data', c)\n  this.emit('end')\n}\n\nfunction proxy (fn) { return function () {\n  var d = this._dest\n  var s = this._src\n  if (d && d[fn]) d[fn].apply(d, arguments)\n  if (s && s[fn]) s[fn].apply(s, arguments)\n}}\n\nMuteStream.prototype.destroy = proxy('destroy')\nMuteStream.prototype.destroySoon = proxy('destroySoon')\nMuteStream.prototype.close = proxy('close')\n"],"file":"mute.js"}