{"version":3,"sources":["../node_modules/nodejs-bing/video.js"],"names":["exports","module","query","hack","filters","rp","require","cheerio","urlencode","urlparser","trim","url","join","results","then","body","$","load","items","each","i","item","result","find","attr","title","text","link","parse","v","videoid","thumbnail","thumbnail_mq","thumbnail_hq","push"],"mappings":"AAAAA,OAAO,GAAGC,MAAM,CAACD,OAAP,GAAiB,UAAUE,KAAV,EAAiBC,IAAI,GAAG,EAAxB,EAA4BC,OAAO,GAAG,EAAtC,EAA0C;AACpE,MAAIC,EAAE,GAAGC,OAAO,CAAC,iBAAD,CAAhB;;AACA,MAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AACA,MAAIE,SAAS,GAAGF,OAAO,CAAC,WAAD,CAAvB;;AACA,MAAIG,SAAS,GAAGH,OAAO,CAAC,KAAD,CAAvB;;AAEAJ,EAAAA,KAAK,GAAGA,KAAK,CAACQ,IAAN,KAAe,GAAf,GAAqBP,IAAI,CAACO,IAAL,EAA7B;AACA,MAAIC,GAAG,GAAG,yCAAyCH,SAAS,CAACN,KAAD,CAA5D;AAEAS,EAAAA,GAAG,GAAGA,GAAG,GAAG,kCAAN,GAA2CP,OAAO,CAACQ,IAAR,CAAa,EAAb,CAAjD;AAEA,MAAIC,OAAO,GAAG,EAAd;AAEA,SAAOR,EAAE,CAACM,GAAD,CAAF,CACLG,IADK,CACA,UAASC,IAAT,EAAe;AACpBC,IAAAA,CAAC,GAAGT,OAAO,CAACU,IAAR,CAAaF,IAAb,CAAJ;AACAG,IAAAA,KAAK,GAAGF,CAAC,CAAC,eAAD,CAAT;AAEAA,IAAAA,CAAC,CAACE,KAAD,CAAD,CAASC,IAAT,CAAc,UAASC,CAAT,EAAYC,IAAZ,EAAkB;AAC/BC,MAAAA,MAAM,GAAG,EAAT;;AACA,UAAGN,CAAC,CAACK,IAAD,CAAD,CAAQE,IAAR,CAAa,gBAAb,EAA+BC,IAA/B,CAAoC,OAApC,CAAH,EAAgD;AAC/CF,QAAAA,MAAM,CAACG,KAAP,GAAeT,CAAC,CAACK,IAAD,CAAD,CAAQE,IAAR,CAAa,gBAAb,EAA+BC,IAA/B,CAAoC,OAApC,CAAf;AACA,OAFD,MAEK;AACJF,QAAAA,MAAM,CAACG,KAAP,GAAeT,CAAC,CAACK,IAAD,CAAD,CAAQE,IAAR,CAAa,WAAb,EAA0BG,IAA1B,EAAf;AACA;;AAED,UAAIC,IAAI,GAAGX,CAAC,CAACK,IAAD,CAAD,CAAQE,IAAR,CAAa,GAAb,EAAkBC,IAAlB,CAAuB,MAAvB,CAAX;AACA,UAAItB,KAAK,GAAGO,SAAS,CAACmB,KAAV,CAAgBD,IAAhB,EAAsB,IAAtB,EAA4BzB,KAAxC;AAEAoB,MAAAA,MAAM,CAACK,IAAP,GAAc,qCAAqCzB,KAAK,CAAC2B,CAAzD;AACAP,MAAAA,MAAM,CAACQ,OAAP,GAAiB5B,KAAK,CAAC2B,CAAvB;AACAP,MAAAA,MAAM,CAACS,SAAP,GAAmB,4BAA4B7B,KAAK,CAAC2B,CAAlC,GAAsC,cAAzD;AACAP,MAAAA,MAAM,CAACU,YAAP,GAAsB,4BAA4B9B,KAAK,CAAC2B,CAAlC,GAAsC,gBAA5D;AACAP,MAAAA,MAAM,CAACW,YAAP,GAAsB,4BAA4B/B,KAAK,CAAC2B,CAAlC,GAAsC,gBAA5D;AAEAhB,MAAAA,OAAO,CAACqB,IAAR,CAAaZ,MAAb;AACA,KAlBD;AAoBA,WAAOT,OAAP;AACA,GA1BK,CAAP;AA2BA,CAxCD","sourcesContent":["exports = module.exports = function (query, hack = '', filters = []) {\n\tvar rp = require('request-promise')\n\tvar cheerio = require('cheerio')\n\tvar urlencode = require('urlencode')\n\tvar urlparser = require('url')\n\n\tquery = query.trim() + ' ' + hack.trim()\n\tvar url = 'http://www.bing.com/videos/search?q=' + urlencode(query)\n\n\turl = url + '&qft=+filterui:msite-youtube.com' + filters.join('')\n\n\tvar results = []\n\n\treturn rp(url)\n\t\t.then(function(body) {\n\t\t\t$ = cheerio.load(body)\n\t\t\titems = $('td.resultCell')\t\n\n\t\t\t$(items).each(function(i, item) {\n\t\t\t\tresult = {}\n\t\t\t\tif($(item).find('div.title span').attr('title')){\n\t\t\t\t\tresult.title = $(item).find('div.title span').attr('title')\n\t\t\t\t}else{\n\t\t\t\t\tresult.title = $(item).find('div.title').text()\n\t\t\t\t}\n\n\t\t\t\tvar link = $(item).find('a').attr('href')\n\t\t\t\tvar query = urlparser.parse(link, true).query\n\n\t\t\t\tresult.link = \"https://www.youtube.com/watch?v=\" + query.v\n\t\t\t\tresult.videoid = query.v\n\t\t\t\tresult.thumbnail = \"https://i.ytimg.com/vi/\" + query.v + \"/default.jpg\";\n\t\t\t\tresult.thumbnail_mq = \"https://i.ytimg.com/vi/\" + query.v + \"/mqdefault.jpg\";\n\t\t\t\tresult.thumbnail_hq = \"https://i.ytimg.com/vi/\" + query.v + \"/hqdefault.jpg\";\n\n\t\t\t\tresults.push(result)\n\t\t\t})\n\n\t\t\treturn results\n\t\t})\n}\n\n\n"],"file":"video.js"}