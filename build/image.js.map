{"version":3,"sources":["../node_modules/nodejs-bing/image.js"],"names":["exports","module","query","hack","filters","rp","require","cheerio","urlencode","trim","url","length","join","results","then","body","$","load","items","each","i","item","result","mediaurl","find","attr","link","title","html","size","push"],"mappings":"AAAAA,OAAO,GAAGC,MAAM,CAACD,OAAP,GAAiB,UAAUE,KAAV,EAAiBC,IAAI,GAAG,EAAxB,EAA4BC,OAAO,GAAG,EAAtC,EAA0C;AACpE,MAAIC,EAAE,GAAGC,OAAO,CAAC,iBAAD,CAAhB;;AACA,MAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AACA,MAAIE,SAAS,GAAGF,OAAO,CAAC,WAAD,CAAvB;;AAEAJ,EAAAA,KAAK,GAAGA,KAAK,CAACO,IAAN,KAAe,GAAf,GAAqBN,IAAI,CAACM,IAAL,EAA7B;AACA,MAAIC,GAAG,GAAG,yCAAyCF,SAAS,CAACN,KAAD,CAA5D;;AAEA,MAAGE,OAAO,CAACO,MAAR,GAAiB,CAApB,EAAsB;AACrBD,IAAAA,GAAG,GAAGA,GAAG,GAAG,OAAN,GAAgBN,OAAO,CAACQ,IAAR,CAAa,EAAb,CAAtB;AACA;;AAED,MAAIC,OAAO,GAAG,EAAd;AAEA,SAAOR,EAAE,CAACK,GAAD,CAAF,CACLI,IADK,CACA,UAASC,IAAT,EAAe;AACpBC,IAAAA,CAAC,GAAGT,OAAO,CAACU,IAAR,CAAaF,IAAb,CAAJ;AACAG,IAAAA,KAAK,GAAGF,CAAC,CAAC,UAAD,CAAT;AAEAA,IAAAA,CAAC,CAACE,KAAD,CAAD,CAASC,IAAT,CAAc,UAASC,CAAT,EAAYC,IAAZ,EAAkB;AAC/BC,MAAAA,MAAM,GAAG,EAAT;AACAA,MAAAA,MAAM,CAACC,QAAP,GAAkBP,CAAC,CAACK,IAAD,CAAD,CAAQG,IAAR,CAAa,SAAb,EAAwBC,IAAxB,CAA6B,MAA7B,CAAlB;AACAH,MAAAA,MAAM,CAACI,IAAP,GAAcV,CAAC,CAACK,IAAD,CAAD,CAAQG,IAAR,CAAa,OAAb,EAAsBC,IAAtB,CAA2B,MAA3B,CAAd;AACAH,MAAAA,MAAM,CAACK,KAAP,GAAeX,CAAC,CAACK,IAAD,CAAD,CAAQG,IAAR,CAAa,SAAb,EAAwBI,IAAxB,EAAf;AACAN,MAAAA,MAAM,CAACO,IAAP,GAAcb,CAAC,CAACK,IAAD,CAAD,CAAQG,IAAR,CAAa,cAAb,EAA6BI,IAA7B,EAAd;AAEAf,MAAAA,OAAO,CAACiB,IAAR,CAAaR,MAAb;AACA,KARD;AAUA,WAAOT,OAAP;AACA,GAhBK,CAAP;AAiBA,CA/BD","sourcesContent":["exports = module.exports = function (query, hack = '', filters = []) {\n\tvar rp = require('request-promise')\n\tvar cheerio = require('cheerio')\n\tvar urlencode = require('urlencode')\n\n\tquery = query.trim() + ' ' + hack.trim()\n\tvar url = 'http://www.bing.com/images/search?q=' + urlencode(query)\n\n\tif(filters.length > 0){\n\t\turl = url + '&qft=' + filters.join('')\n\t}\n\n\tvar results = []\n\n\treturn rp(url)\n\t\t.then(function(body) {\n\t\t\t$ = cheerio.load(body)\n\t\t\titems = $('div.item')\t\n\n\t\t\t$(items).each(function(i, item) {\n\t\t\t\tresult = {}\n\t\t\t\tresult.mediaurl = $(item).find('a.thumb').attr('href')\n\t\t\t\tresult.link = $(item).find('a.tit').attr('href')\n\t\t\t\tresult.title = $(item).find('div.des').html()\n\t\t\t\tresult.size = $(item).find('div.fileInfo').html()\n\n\t\t\t\tresults.push(result)\n\t\t\t})\n\n\t\t\treturn results\n\t\t})\n}\n\n\n"],"file":"image.js"}